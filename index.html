<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Permainan Pulau Haba - Geografi Tingkatan 2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .game-board {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            padding: 20px;
        }

        .board-area {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            position: relative;
        }

        .city-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .city-cell {
            aspect-ratio: 1;
            border: 2px solid #ddd;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.5rem;
            background: #fff;
        }

        .city-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .city-cell.building {
            background: #95a5a6;
            border-color: #7f8c8d;
        }

        .city-cell.park {
            background: #2ecc71;
            border-color: #27ae60;
        }

        .city-cell.water {
            background: #3498db;
            border-color: #2980b9;
        }

        .city-cell.road {
            background: #34495e;
            border-color: #2c3e50;
        }

        .temperature-display {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
            border-radius: 10px;
        }

        .temp-value {
            font-size: 2rem;
            font-weight: bold;
            color: #e74c3c;
        }

        .control-panel {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
        }

        .tool-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tool-btn {
            padding: 15px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .tool-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .tool-btn.active {
            transform: scale(0.95);
            box-shadow: inset 0 3px 10px rgba(0,0,0,0.2);
        }

        .building-btn {
            background: #95a5a6;
            color: white;
        }

        .park-btn {
            background: #2ecc71;
            color: white;
        }

        .water-btn {
            background: #3498db;
            color: white;
        }

        .road-btn {
            background: #34495e;
            color: white;
        }

        .info-panel {
            background: #ecf0f1;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .info-panel h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .effects-list {
            list-style: none;
            padding: 0;
        }

        .effects-list li {
            padding: 8px;
            margin: 5px 0;
            border-radius: 5px;
            font-size: 0.9rem;
        }

        .positive {
            background: #d5f4e6;
            color: #27ae60;
        }

        .negative {
            background: #fadbd8;
            color: #e74c3c;
        }

        .score-panel {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .score-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .reset-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .reset-btn:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        .legend {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .instructions-panel {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            margin: 0;
        }

        .instructions-panel h3 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .instructions-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .instruction-step {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .step-number {
            background: #fff;
            color: #0984e3;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .learning-objectives {
            text-align: center;
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        @media (max-width: 768px) {
            .game-board {
                grid-template-columns: 1fr;
            }
            
            .city-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .header h1 {
                font-size: 2rem;
            }

            .instructions-content {
                grid-template-columns: 1fr;
            }

            .instruction-step {
                flex-direction: column;
                text-align: center;
                gap: 8px;
            }

            .instructions-panel h3 {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>üèôÔ∏è Permainan Pulau Haba üå°Ô∏è</h1>
            <p>Belajar tentang fenomena pulau haba dan kesannya terhadap persekitaran bandar</p>
        </div>

        <div class="instructions-panel">
            <h3>üìã Arahan Permainan</h3>
            <div class="instructions-content">
                <div class="instruction-step">
                    <span class="step-number">1</span>
                    <span>Pilih jenis pembangunan dari panel kawalan (Bangunan, Taman, Air, atau Jalan)</span>
                </div>
                <div class="instruction-step">
                    <span class="step-number">2</span>
                    <span>Klik pada kotak kosong di grid bandar untuk meletakkan pilihan anda</span>
                </div>
                <div class="instruction-step">
                    <span class="step-number">3</span>
                    <span>Perhatikan bagaimana suhu bandar berubah dengan setiap pembangunan</span>
                </div>
                <div class="instruction-step">
                    <span class="step-number">4</span>
                    <span>Cuba bina bandar yang seimbang untuk mengelakkan pulau haba teruk!</span>
                </div>
            </div>
            <div class="learning-objectives">
                <strong>üéØ Objektif Pembelajaran:</strong> Memahami bagaimana pembangunan bandar mempengaruhi suhu dan cara mengurangkan kesan pulau haba
            </div>
        </div>

        <div class="game-board">
            <div class="board-area">
                <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">Bandar Anda</h2>
                
                <div class="city-grid" id="cityGrid">
                    <!-- Grid akan dihasilkan oleh JavaScript -->
                </div>

                <div class="temperature-display">
                    <div>Suhu Purata Bandar</div>
                    <div class="temp-value" id="temperature">25¬∞C</div>
                    <div style="font-size: 0.9rem; margin-top: 5px;" id="tempStatus">Suhu Normal</div>
                </div>

                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #95a5a6;"></div>
                        <span>üè¢ Bangunan (+2¬∞C)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #2ecc71;"></div>
                        <span>üå≥ Taman (-1¬∞C)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #3498db;"></div>
                        <span>üíß Air (-2¬∞C)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #34495e;"></div>
                        <span>üõ£Ô∏è Jalan (+1¬∞C)</span>
                    </div>
                </div>
            </div>

            <div class="control-panel">
                <h3 style="text-align: center; margin-bottom: 15px; color: #2c3e50;">Panel Kawalan</h3>
                
                <div class="tool-buttons">
                    <button class="tool-btn building-btn" onclick="selectTool('building')">
                        üè¢ Bangunan
                    </button>
                    <button class="tool-btn park-btn" onclick="selectTool('park')">
                        üå≥ Taman
                    </button>
                    <button class="tool-btn water-btn" onclick="selectTool('water')">
                        üíß Air
                    </button>
                    <button class="tool-btn road-btn" onclick="selectTool('road')">
                        üõ£Ô∏è Jalan
                    </button>
                </div>

                <div class="info-panel">
                    <h3>Kesan Pulau Haba</h3>
                    <ul class="effects-list" id="effectsList">
                        <li class="positive">Suhu bandar masih dalam tahap normal</li>
                    </ul>
                </div>

                <div class="score-panel">
                    <div>Skor Kelestarian</div>
                    <div class="score-value" id="score">100</div>
                    <div style="font-size: 0.9rem;">Skor tinggi = Bandar lestari</div>
                </div>

                <button class="reset-btn" onclick="resetGame()">üîÑ Mula Semula</button>
            </div>
        </div>
    </div>

    <script>
        let selectedTool = 'building';
        let cityData = [];
        let baseTemperature = 25;

        // Inisialisasi grid bandar
        function initializeCity() {
            const grid = document.getElementById('cityGrid');
            grid.innerHTML = '';
            cityData = [];

            for (let i = 0; i < 36; i++) {
                const cell = document.createElement('div');
                cell.className = 'city-cell';
                cell.onclick = () => placeTile(i);
                grid.appendChild(cell);
                cityData.push('empty');
            }
            updateTemperature();
            updateEffects();
            updateScore();
        }

        // Pilih alat pembinaan
        function selectTool(tool) {
            selectedTool = tool;
            
            // Update tampilan butang aktif
            document.querySelectorAll('.tool-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const toolButtons = {
                'building': '.building-btn',
                'park': '.park-btn',
                'water': '.water-btn',
                'road': '.road-btn'
            };
            
            document.querySelector(toolButtons[tool]).classList.add('active');
        }

        // Letakkan tile di grid
        function placeTile(index) {
            if (cityData[index] === selectedTool) return;
            
            cityData[index] = selectedTool;
            const cell = document.querySelectorAll('.city-cell')[index];
            
            // Update tampilan sel
            cell.className = `city-cell ${selectedTool}`;
            
            const icons = {
                'building': 'üè¢',
                'park': 'üå≥',
                'water': 'üíß',
                'road': 'üõ£Ô∏è',
                'empty': ''
            };
            
            cell.textContent = icons[selectedTool];
            
            updateTemperature();
            updateEffects();
            updateScore();
        }

        // Kira dan update suhu
        function updateTemperature() {
            let tempChange = 0;
            
            cityData.forEach(tile => {
                switch(tile) {
                    case 'building':
                        tempChange += 2;
                        break;
                    case 'road':
                        tempChange += 1;
                        break;
                    case 'park':
                        tempChange -= 1;
                        break;
                    case 'water':
                        tempChange -= 2;
                        break;
                }
            });
            
            const currentTemp = baseTemperature + tempChange;
            document.getElementById('temperature').textContent = `${currentTemp}¬∞C`;
            
            // Update status suhu
            const tempStatus = document.getElementById('tempStatus');
            if (currentTemp <= 26) {
                tempStatus.textContent = 'Suhu Normal';
                tempStatus.style.color = '#27ae60';
            } else if (currentTemp <= 30) {
                tempStatus.textContent = 'Pulau Haba Sederhana';
                tempStatus.style.color = '#f39c12';
            } else {
                tempStatus.textContent = 'Pulau Haba Teruk!';
                tempStatus.style.color = '#e74c3c';
            }
        }

        // Update kesan-kesan
        function updateEffects() {
            const effectsList = document.getElementById('effectsList');
            const currentTemp = baseTemperature + getTempChange();
            const effects = [];
            
            if (currentTemp <= 26) {
                effects.push({text: 'Suhu bandar dalam tahap normal', type: 'positive'});
                effects.push({text: 'Penggunaan tenaga untuk penyaman udara rendah', type: 'positive'});
            } else if (currentTemp <= 30) {
                effects.push({text: 'Berlaku fenomena pulau haba sederhana', type: 'negative'});
                effects.push({text: 'Penggunaan tenaga elektrik meningkat', type: 'negative'});
                effects.push({text: 'Kualiti udara mula terjejas', type: 'negative'});
            } else {
                effects.push({text: 'Pulau haba teruk - suhu terlalu tinggi!', type: 'negative'});
                effects.push({text: 'Penggunaan tenaga elektrik sangat tinggi', type: 'negative'});
                effects.push({text: 'Kualiti udara buruk', type: 'negative'});
                effects.push({text: 'Kesihatan penduduk terancam', type: 'negative'});
            }
            
            // Tambah kesan berdasarkan jenis tile
            const parkCount = cityData.filter(tile => tile === 'park').length;
            const waterCount = cityData.filter(tile => tile === 'water').length;
            
            if (parkCount >= 8) {
                effects.push({text: 'Banyak ruang hijau - udara segar!', type: 'positive'});
            }
            
            if (waterCount >= 4) {
                effects.push({text: 'Cukup sumber air untuk penyejukan', type: 'positive'});
            }
            
            effectsList.innerHTML = effects.map(effect => 
                `<li class="${effect.type}">${effect.text}</li>`
            ).join('');
        }

        // Kira perubahan suhu
        function getTempChange() {
            let tempChange = 0;
            cityData.forEach(tile => {
                switch(tile) {
                    case 'building': tempChange += 2; break;
                    case 'road': tempChange += 1; break;
                    case 'park': tempChange -= 1; break;
                    case 'water': tempChange -= 2; break;
                }
            });
            return tempChange;
        }

        // Update skor kelestarian
        function updateScore() {
            const currentTemp = baseTemperature + getTempChange();
            const buildingCount = cityData.filter(tile => tile === 'building').length;
            const parkCount = cityData.filter(tile => tile === 'park').length;
            const waterCount = cityData.filter(tile => tile === 'water').length;
            
            let score = 100;
            
            // Penalti untuk suhu tinggi
            if (currentTemp > 26) {
                score -= (currentTemp - 26) * 10;
            }
            
            // Bonus untuk keseimbangan
            const greenSpaces = parkCount + waterCount;
            const developedSpaces = buildingCount;
            
            if (greenSpaces >= developedSpaces * 0.3) {
                score += 20;
            }
            
            // Pastikan skor tidak negatif
            score = Math.max(0, Math.round(score));
            
            document.getElementById('score').textContent = score;
        }

        // Reset permainan
        function resetGame() {
            initializeCity();
            selectTool('building');
        }

        // Mulakan permainan
        window.onload = function() {
            initializeCity();
            selectTool('building');
        };
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9836b836e0f25348',t:'MTc1ODU5NTY2OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
