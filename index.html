<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hubung Kait: Ciri Pandang Darat Fizikal ↔ Budaya — Geografi Tingkatan 2 Bab 2</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{--bg1:#e9f7f2;--accent:#1565c0;--card:#ffffff;--muted:#374151}
    *{box-sizing:border-box}
    body{font-family:'Poppins',sans-serif;background:linear-gradient(135deg,var(--bg1),#ffffff);margin:0;padding:18px;display:flex;justify-content:center}
    .wrap{max-width:780px;width:100%}
    header{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06);}
    h1{margin:0;font-size:1.15rem;color:var(--accent)}
    .meta{color:#4b5563;font-size:0.95rem}

    .instructions{background:#f1f8e9;border-left:6px solid #8bc34a;padding:14px;border-radius:10px;margin-top:14px}
    .instructions h2{margin:0 0 8px;font-size:1rem;color:#33691e}
    .instructions ul{margin:0;padding-left:20px;color:#33691e;font-size:0.95rem}

    .card{background:var(--card);border-radius:12px;padding:16px;margin-top:14px;box-shadow:0 6px 18px rgba(0,0,0,0.04)}
    .question-box{background:#eaf6ff;padding:14px;border-radius:10px;border-left:6px solid #90caf9;margin-bottom:10px}
    .question-box p{margin:6px 0;font-weight:600;color:#0d47a1}

    textarea{width:100%;min-height:84px;padding:10px;border-radius:8px;border:1px solid #d1d5db;margin-top:12px;font-size:14px}
    .controls{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    button{background:var(--accent);color:#fff;border:0;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:600}
    button.secondary{background:#42a5f5}
    button.ghost{background:#f3f4f6;color:#111}

    .feedback{display:none;padding:12px;border-radius:8px;margin-top:10px;font-weight:600}
    .feedback.correct{background:#e6f4ea;color:#14532d}
    .feedback.partial{background:#fff7e6;color:#6a4a00}
    .feedback.incorrect{background:#ffe7e7;color:#7f1d1d}

    .progress{height:12px;background:#f3f4f6;border-radius:8px;overflow:hidden;margin-top:12px}
    .progress > i{display:block;height:100%;width:0;background:linear-gradient(90deg,#4dd0e1,#1565c0);transition:width .4s}

    .end{display:none;text-align:center;padding:12px}

    footer{margin-top:12px;color:#6b7280;font-size:13px}

    @media (max-width:600px){button{flex:1 1 auto}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Hubung Kait: Ciri Pandang Darat Fizikal ↔ Budaya</h1>
      <div class="meta">Geografi Tingkatan 2 — Bab 2 • Mod Murid</div>
    </header>

    <div class="instructions">
      <h2>Arahan</h2>
      <ul>
        <li>Baca pernyataan dalam kotak biru.</li>
        <li>Tulis jawapan anda menerangkan hubungan antara <b>ciri fizikal</b> dan <b>budaya</b>.</li>
        <li>Klik <b>Hantar</b> untuk semak jawapan.</li>
        <li>Jika kurang tepat, guna <b>Cuba Lagi</b> atau teruskan ke soalan seterusnya.</li>
        <li>Lengkapkan semua soalan untuk lihat ringkasan jawapan anda.</li>
      </ul>
    </div>

    <div class="card" id="card">
      <div id="stageArea"></div>
      <div class="progress"><i id="bar"></i></div>
      <div id="summary" class="end"></div>
    </div>

    <footer>Tip: Gunakan ayat ringkas 1–2 ayat sahaja.</footer>
  </div>

  <script>
    // Soalan—dipisahkan setiap ayat agar lebih jelas
    const questions = [
      { type: 'A', text: '🌾 Pernyataan: Kawasan tanah pamah yang subur.\n• Banyak sawah padi terdapat di kawasan ini.\nSoalan: Terangkan satu cara ciri fizikal ini mempengaruhi budaya setempat.', keywords: ['padi','sawah','menuai','pertanian','kampung'] },
      { type: 'B', text: '🏠 Pernyataan: Budaya rumah panggung tradisional.\n• Rumah dibina tinggi di atas tiang.\nSoalan: Apakah ciri fizikal yang biasanya terdapat di kawasan ini?', keywords: ['banjir','lembap','pantai','tasik','air','rendah'] },
      { type: 'A', text: '🚣 Pernyataan: Sungai lebar boleh dilayari.\n• Menjadi laluan utama penduduk.\nSoalan: Terangkan satu aktiviti budaya/ekonomi yang dipengaruhi oleh sungai.', keywords: ['perdagangan','pengangkutan','ikan','pelabuhan','pasar'] },
      { type: 'B', text: '🎎 Pernyataan: Upacara menuai padi diadakan setiap tahun.\n• Menjadi budaya masyarakat tani.\nSoalan: Apakah ciri fizikal atau musim yang menyokong budaya ini?', keywords: ['datar','sawah','iklim','musim','pertanian'] },
      { type: 'A', text: '⛰️ Pernyataan: Kawasan berbukit.\n• Pertanian teres dijalankan di lereng bukit.\nSoalan: Terangkan satu penyesuaian budaya atau teknik pertanian di kawasan ini.', keywords: ['teres','lereng','bukit','padi','penduduk'] },
      { type: 'B', text: '🏖️ Pernyataan: Komuniti nelayan di tepi laut.\n• Aktiviti menangkap ikan menjadi budaya.\nSoalan: Nyatakan satu ciri fizikal yang biasanya terdapat di kawasan ini.', keywords: ['pantai','laut','ikan','gelombang','karang'] }
    ];

    let idx = 0;
    const total = questions.length;
    const stageArea = document.getElementById('stageArea');
    const bar = document.getElementById('bar');
    const summary = document.getElementById('summary');
    const answers = [];

    function renderStage() {
      const q = questions[idx];
      bar.style.width = Math.round((idx/total)*100)+'%';

      stageArea.innerHTML = `
        <div class="question-box">
          <p>${q.text.replace(/\\n/g,'<br>')}</p>
        </div>
        <textarea id="resp" placeholder="Tulis jawapan anda di sini..."></textarea>
        <div class="controls">
          <button id="send">Hantar</button>
          <button class="secondary" id="try" style="display:none;">Cuba Lagi</button>
          <button class="ghost" id="skip" style="display:none;">Teruskan Soalan Lain</button>
        </div>
        <div id="fb" class="feedback"></div>
      `;

      document.getElementById('send').addEventListener('click', handleSubmit);
      document.getElementById('try').addEventListener('click', ()=>{ document.getElementById('fb').style.display='none'; document.getElementById('resp').focus(); document.getElementById('try').style.display='none'; });
      document.getElementById('skip').addEventListener('click', ()=>{ answers.push({q: q.text, a: '(Dilangkau)', fb: 'Dilangkau oleh pelajar'}); nextStage(); });
    }

    function normalize(s){ return s? s.toLowerCase().replace(/[.,!?;:]/g,'') : ''; }

    function handleSubmit(){
      const q = questions[idx];
      const val = normalize(document.getElementById('resp').value);
      const fb = document.getElementById('fb');
      const kws = q.keywords.map(k=>k.toLowerCase());

      if(!val){ fb.className='feedback incorrect'; fb.style.display='block'; fb.textContent='⚠️ Sila masukkan jawapan sebelum hantar.'; return; }

      let found = kws.some(k=> val.includes(k));
      if(found){
        fb.className='feedback correct';
        fb.style.display='block';
        fb.textContent = 'Betul ✅ Contoh jawapan: ' + kws.slice(0,3).join(', ') + '.';
        answers.push({q:q.text,a:val,fb:fb.textContent});
        setTimeout(()=>{ nextStage(); },900);
      } else if(val.length>6){
        fb.className='feedback partial';
        fb.style.display='block';
        fb.textContent = 'Hampir betul ✨ Contoh jawapan: ' + kws.join(', ') + '.';
        document.getElementById('try').style.display='inline-block';
        document.getElementById('skip').style.display='inline-block';
        answers.push({q:q.text,a:val,fb:fb.textContent});
      } else {
        fb.className='feedback incorrect';
        fb.style.display='block';
        fb.textContent = 'Kurang tepat ❌. Contoh jawapan: ' + kws.join(', ') + '.';
        document.getElementById('try').style.display='inline-block';
        document.getElementById('skip').style.display='inline-block';
        answers.push({q:q.text,a:val,fb:fb.textContent});
      }
    }

    function nextStage(){
      idx++;
      if(idx < total){ renderStage(); } else { finishQuiz(); }
    }

    function finishQuiz(){
      bar.style.width = '100%';
      stageArea.innerHTML = '';
      let html = '<h3>🎉 Tamat — Ringkasan Jawapan</h3><ol>';
      answers.forEach(a=>{ html += `<li><strong>Pernyataan:</strong><div style="margin:6px 0;padding:8px;background:#f8fafc;border-radius:6px">${a.q.replace(/\\n/g,'<br>')}</div><strong>Jawapan murid:</strong> ${a.a}<br><em>Maklum balas:</em> ${a.fb}</li><br>`; });
      html += '</ol><div style="margin-top:12px"><button onclick="restart()">Ulang Semula</button></div>';
      summary.innerHTML = html; summary.style.display = 'block';
    }

    function restart(){ idx = 0; answers.length = 0; summary.style.display='none'; renderStage(); }

    renderStage();
  </script>
</body>
</html>
