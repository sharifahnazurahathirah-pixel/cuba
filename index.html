<!doctype html>
<html lang="ms">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Roda Impian: Sayangi Anggota Keluarga</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap');
  :root{
    --bg:#f1f5f9; --card:#fff; --muted:#6b7280;
    --accent:#06b6d4; --accent2:#34d399; --danger:#fb7185;
    --primary:#8b5cf6; --secondary:#f59e0b; --success:#10b981;
    font-family: 'Poppins', Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(135deg,#667eea 0%,#764ba2 50%,#f093fb 100%);color:#0f172a;min-height:100vh}
  .wrap{max-width:980px;margin:24px auto;padding:16px}
  header{display:flex;flex-direction:column;gap:16px;align-items:center;text-align:center;background:rgba(255,255,255,0.95);backdrop-filter:blur(10px);border-radius:20px;padding:24px;box-shadow:0 20px 40px rgba(0,0,0,0.1);border:1px solid rgba(255,255,255,0.2)}
  h1{margin:0;font-size:1.8rem;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:800}
  .instructions{width:100%;max-width:600px}
  p.lead{margin:0 0 12px 0;color:#667eea;font-size:1.1rem;font-weight:600}
  .steps{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:8px;margin:12px 0}
  .step{background:linear-gradient(135deg,rgba(102,126,234,0.1),rgba(240,147,251,0.1));padding:8px 12px;border-radius:12px;font-size:0.9rem;font-weight:500;border:1px solid rgba(102,126,234,0.2)}
  .target{margin:12px 0 0 0;color:#8b5cf6;font-size:0.95rem;font-weight:500}

  .game{
    display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:18px;
  }
  @media(max-width:880px){ 
    .game{grid-template-columns:1fr;}
    .wrap{padding:12px;margin:12px auto;}
    header{padding:20px;}
    h1{font-size:1.5rem;}
    .wheelWrap{padding:20px;}
    .panel{padding:16px;}
    .spinBtn{padding:12px 24px;font-size:1rem;}
  }
  @media(max-width:480px){
    .wrap{padding:8px;margin:8px auto;}
    header{padding:16px;}
    h1{font-size:1.3rem;}
    .wheelWrap{padding:16px;}
    .panel{padding:12px;}
    .spinBtn{padding:10px 20px;font-size:0.95rem;}
    .optBtn{padding:12px 14px;}
  }
  /* wheel area */
  .wheelWrap{
    background:linear-gradient(135deg,rgba(255,255,255,0.95),rgba(255,255,255,0.85));
    backdrop-filter:blur(15px);border-radius:20px;padding:24px;
    box-shadow:0 25px 50px rgba(0,0,0,0.15);
    display:flex;flex-direction:column;align-items:center;gap:16px;
    border:1px solid rgba(255,255,255,0.3);
  }
  .wheelCanvas{width:100%;max-width:520px}
  .spinBtn{
    background:linear-gradient(135deg,#667eea,#764ba2,#f093fb);color:#fff;border:none;padding:14px 28px;border-radius:50px;font-weight:700;cursor:pointer;
    box-shadow:0 15px 35px rgba(102,126,234,0.4);font-size:1.1rem;
    transition:all 0.3s ease;position:relative;overflow:hidden;
  }
  .spinBtn:hover{transform:translateY(-2px);box-shadow:0 20px 40px rgba(102,126,234,0.5)}
  .spinBtn:active{transform:translateY(0)}
  .spinBtn:disabled{opacity:.5;cursor:not-allowed}
  .infoRow{display:flex;gap:12px;align-items:center;font-size:1rem;color:#4b5563;background:rgba(255,255,255,0.7);padding:8px 16px;border-radius:25px;backdrop-filter:blur(10px)}
  .score{font-weight:800;color:#667eea;font-size:1.2rem}

  /* panel kanan */
  .panel{
    background:linear-gradient(135deg,rgba(255,255,255,0.95),rgba(255,255,255,0.85));
    backdrop-filter:blur(15px);border-radius:20px;padding:20px;
    box-shadow:0 25px 50px rgba(0,0,0,0.15);
    display:flex;flex-direction:column;gap:16px;
    border:1px solid rgba(255,255,255,0.3);
  }
  .panel h3{margin:0;font-size:1.2rem;background:linear-gradient(135deg,#f093fb,#f5576c);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:700}
  .situasiBox{min-height:120px;display:flex;flex-direction:column;gap:12px;justify-content:center;padding:16px;border-radius:15px;border:2px dashed rgba(102,126,234,0.3);background:linear-gradient(135deg,rgba(102,126,234,0.1),rgba(240,147,251,0.1));backdrop-filter:blur(5px)}
  .options{display:flex;flex-direction:column;gap:12px}
  .optBtn{
    border-radius:15px;padding:14px 18px;text-align:left;border:2px solid rgba(102,126,234,0.2);
    background:linear-gradient(135deg,rgba(255,255,255,0.9),rgba(255,255,255,0.7));
    cursor:pointer;font-weight:600;transition:all 0.3s ease;
    backdrop-filter:blur(10px);box-shadow:0 8px 25px rgba(0,0,0,0.1);
  }
  .optBtn:hover{transform:translateY(-2px);box-shadow:0 12px 30px rgba(102,126,234,0.2);border-color:rgba(102,126,234,0.4)}
  .optBtn.correct{background:linear-gradient(135deg,#10b981,#34d399);border-color:#10b981;color:#fff;box-shadow:0 12px 30px rgba(16,185,129,0.4)}
  .optBtn.wrong{background:linear-gradient(135deg,#ef4444,#f87171);border-color:#ef4444;color:#fff;box-shadow:0 12px 30px rgba(239,68,68,0.4)}
  .optBtn:disabled{opacity:.7;cursor:not-allowed}

  .feedback{min-height:40px;color:var(--muted);font-weight:600}
  .controlsRow{display:flex;gap:8px;justify-content:space-between;align-items:center}
  .small{font-size:.88rem;color:var(--muted)}
  footer{margin-top:18px;text-align:center;color:#ffffff;font-size:.86rem;font-weight:500;text-shadow:0 2px 4px rgba(0,0,0,0.3)}

  /* pointer */
  .pointer{
    position:relative;width:0;height:0;border-left:16px solid transparent;border-right:16px solid transparent;border-bottom:28px solid #667eea;border-radius:3px;
    margin-top:-8px;
    filter:drop-shadow(0 8px 15px rgba(102,126,234,0.4));
    animation:pointerPulse 2s ease-in-out infinite;
  }
  @keyframes pointerPulse{
    0%,100%{transform:scale(1)}
    50%{transform:scale(1.1)}
  }
  @keyframes wheelShake{
    0%,100%{transform:translateX(0)}
    25%{transform:translateX(-3px)}
    75%{transform:translateX(3px)}
  }
  @keyframes wheelComplete{
    0%{transform:scale(1)}
    50%{transform:scale(1.05)}
    100%{transform:scale(1)}
  }

  .resetBtn{
    background:linear-gradient(135deg,#6b7280,#4b5563);color:#fff;border:none;padding:10px 16px;border-radius:25px;font-size:.9rem;cursor:pointer;
    transition:all 0.3s ease;box-shadow:0 8px 20px rgba(107,114,128,0.3);font-weight:600;
  }
  .resetBtn:hover{transform:translateY(-2px);box-shadow:0 12px 25px rgba(107,114,128,0.4)}
</style>
</head>
<body>
<main class="wrap" role="main">
  <header>
    <h1>Roda Impian: Cara Menyayangi Anggota Keluarga</h1>
    <div class="instructions">
      <p class="lead">üéØ <strong>Cara Bermain:</strong></p>
      <div class="steps">
        <div class="step">1Ô∏è‚É£ Klik butang <strong>"Putar Roda"</strong> atau tekan <strong>SPACE</strong></div>
        <div class="step">2Ô∏è‚É£ Baca situasi keluarga yang muncul dengan teliti</div>
        <div class="step">3Ô∏è‚É£ Pilih jawapan yang menunjukkan <strong>kasih sayang terbaik</strong></div>
        <div class="step">4Ô∏è‚É£ Dapatkan 10 mata untuk setiap jawapan betul! üåü</div>
      </div>
      <p class="target">üéì <em>Sesuai untuk murid Pendidikan Moral - Mari belajar nilai keluarga!</em></p>
    </div>
  </header>

  <section class="game" aria-label="Permainan Roda Impian">
    <div class="wheelWrap" aria-hidden="false">
      <canvas id="wheel" class="wheelCanvas" width="520" height="520"></canvas>
      <div class="pointer" aria-hidden="true"></div>
      <div style="display:flex;gap:10px;align-items:center;margin-top:8px;">
        <button id="spinBtn" class="spinBtn" aria-label="Putar roda">Putar Roda</button>
        <div class="infoRow"><span class="small">Skor:</span> <span class="score" id="score">0</span></div>
      </div>
      <div class="small" style="margin-top:6px">Petua: Gunakan kekunci ruang (space) untuk putar.</div>
    </div>

    <aside class="panel" aria-live="polite">
      <h3>Situasi & Pilihan</h3>
      <div class="situasiBox" id="situasiBox">
        <p style="text-align:center;color:var(--muted);font-style:italic;">Putar roda untuk mendapat situasi keluarga...</p>
      </div>
      
      <div class="options" id="options" style="display:none;">
        <button class="optBtn" id="opt1"></button>
        <button class="optBtn" id="opt2"></button>
        <button class="optBtn" id="opt3"></button>
      </div>
      
      <div class="feedback" id="feedback"></div>
      
      <div class="controlsRow">
        <button class="resetBtn" id="resetBtn">Mula Semula</button>
        <div class="small">Soalan: <span id="questionCount">0</span>/10</div>
      </div>
    </aside>
  </section>

  <footer>
    <p>Permainan ini membantu murid memahami nilai-nilai keluarga dan cara menunjukkan kasih sayang kepada ahli keluarga.</p>
  </footer>
</main>

<script>
// Data situasi dan pilihan
const scenarios = [
  {
    situation: "Adik kamu menangis kerana mainannya rosak. Apa yang kamu akan buat?",
    options: [
      "Tolong baiki mainan atau cari mainan lain untuk adik",
      "Biarkan sahaja adik menangis",
      "Marah adik kerana bising"
    ],
    correct: 0,
    feedback: "Betul! Membantu adik menunjukkan kasih sayang dan kepedulian dalam keluarga."
  },
  {
    situation: "Ibu kelihatan penat selepas kerja. Bagaimana kamu boleh membantu?",
    options: [
      "Terus bermain tanpa peduli",
      "Bantu buat kerja rumah atau urut bahu ibu",
      "Minta ibu masak makanan kegemaran"
    ],
    correct: 1,
    feedback: "Tepat sekali! Membantu ibu yang penat adalah cara terbaik menunjukkan kasih sayang."
  },
  {
    situation: "Ayah sedang membaca akhbar. Kamu mahu bermain dengan ayah. Apa yang patut?",
    options: [
      "Tunggu ayah habis baca, kemudian minta bermain dengan sopan",
      "Rebut akhbar dari tangan ayah",
      "Buat bising supaya ayah perhatikan kamu"
    ],
    correct: 0,
    feedback: "Bagus! Menghormati masa ayah dan meminta dengan sopan menunjukkan adab yang baik."
  },
  {
    situation: "Nenek datang melawat. Dia membawa hadiah untuk kamu. Apa reaksi yang sesuai?",
    options: [
      "Ambil hadiah dan terus bermain",
      "Ucap terima kasih, peluk nenek, dan tanya khabar sihat nenek",
      "Tanya kenapa hadiah kecil sahaja"
    ],
    correct: 1,
    feedback: "Hebat! Menunjukkan rasa syukur dan kasih sayang kepada nenek adalah sangat penting."
  },
  {
    situation: "Kakak kamu sedang belajar untuk peperiksaan. Rumah perlu senyap. Apa yang kamu buat?",
    options: [
      "Main muzik kuat-kuat",
      "Bermain dengan senyap atau keluar rumah",
      "Ganggu kakak supaya dia bermain dengan kamu"
    ],
    correct: 1,
    feedback: "Betul! Menghormati masa belajar kakak menunjukkan kamu peduli dengan kejayaannya."
  },
  {
    situation: "Masa makan malam bersama keluarga. Bagaimana cara yang betul?",
    options: [
      "Makan sambil tengok TV atau main telefon",
      "Makan bersama-sama, berbual, dan bantu kemas meja",
      "Makan cepat-cepat dan pergi bermain"
    ],
    correct: 1,
    feedback: "Tepat! Masa makan bersama adalah masa penting untuk berkongsi dan mengeratkan hubungan keluarga."
  },
  {
    situation: "Ibu bapa kamu bergaduh. Kamu rasa sedih. Apa yang patut kamu buat?",
    options: [
      "Campur tangan dan pilih pihak",
      "Berdoa supaya mereka berbaik, dan tanya jika boleh tolong apa-apa",
      "Buat bising supaya mereka berhenti"
    ],
    correct: 1,
    feedback: "Bijak! Berdoa dan menawarkan bantuan dengan cara yang sesuai menunjukkan kematangan."
  },
  {
    situation: "Hari lahir ayah esok. Kamu tidak ada wang untuk beli hadiah. Apa yang boleh buat?",
    options: [
      "Tidak buat apa-apa kerana tiada wang",
      "Buat kad ucapan sendiri atau tolong buat kerja rumah extra",
      "Minta wang dari ibu untuk beli hadiah"
    ],
    correct: 1,
    feedback: "Bagus sekali! Hadiah dari hati seperti kad buatan sendiri lebih bermakna daripada hadiah mahal."
  },
  {
    situation: "Adik kamu selalu ikut kamu ke mana-mana. Kamu rasa terganggu. Bagaimana?",
    options: [
      "Marah dan halau adik pergi",
      "Sabar dan sesekali ajak adik join aktiviti yang sesuai",
      "Sorok dari adik supaya dia tak jumpa"
    ],
    correct: 1,
    feedback: "Hebat! Bersabar dengan adik dan melibatkannya menunjukkan kasih sayang abang/kakak yang baik."
  },
  {
    situation: "Keluarga kamu merancang aktiviti hujung minggu. Kamu tidak suka pilihan mereka. Apa reaksi yang betul?",
    options: [
      "Merajuk dan tidak mahu ikut",
      "Berikan cadangan dengan sopan, tapi ikut keputusan keluarga",
      "Paksa keluarga tukar rancangan"
    ],
    correct: 1,
    feedback: "Betul! Memberi pendapat dengan sopan tetapi menghormati keputusan keluarga menunjukkan sikap dewasa."
  }
];

// Game state
let currentScore = 0;
let currentQuestion = 0;
let currentScenario = null;
let isSpinning = false;
let gameStarted = false;

// Canvas setup
const canvas = document.getElementById('wheel');
const ctx = canvas.getContext('2d');
const centerX = canvas.width / 2;
const centerY = canvas.height / 2;
const radius = 240;

// Wheel segments
const segments = [
  { color: '#ff6b6b', text: 'Kasih Sayang' },
  { color: '#4ecdc4', text: 'Hormat' },
  { color: '#667eea', text: 'Tolong Menolong' },
  { color: '#10b981', text: 'Sabar' },
  { color: '#f59e0b', text: 'Perhatian' },
  { color: '#f093fb', text: 'Syukur' },
  { color: '#06b6d4', text: 'Komunikasi' },
  { color: '#8b5cf6', text: 'Pengorbanan' }
];

let currentRotation = 0;
let targetRotation = 0;
let spinSpeed = 0;

// Draw wheel
function drawWheel() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  const segmentAngle = (2 * Math.PI) / segments.length;
  
  // Draw outer glow
  ctx.beginPath();
  ctx.arc(centerX, centerY, radius + 10, 0, 2 * Math.PI);
  const glowGradient = ctx.createRadialGradient(centerX, centerY, radius - 20, centerX, centerY, radius + 15);
  glowGradient.addColorStop(0, 'rgba(102,126,234,0)');
  glowGradient.addColorStop(1, 'rgba(102,126,234,0.3)');
  ctx.fillStyle = glowGradient;
  ctx.fill();
  
  segments.forEach((segment, index) => {
    const startAngle = (index * segmentAngle) + currentRotation;
    const endAngle = ((index + 1) * segmentAngle) + currentRotation;
    
    // Draw segment with gradient
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.arc(centerX, centerY, radius, startAngle, endAngle);
    ctx.closePath();
    
    // Create radial gradient for each segment
    const gradient = ctx.createRadialGradient(centerX, centerY, 50, centerX, centerY, radius);
    gradient.addColorStop(0, segment.color);
    gradient.addColorStop(1, darkenColor(segment.color, 0.3));
    ctx.fillStyle = gradient;
    ctx.fill();
    
    // Add inner shadow
    ctx.strokeStyle = 'rgba(255,255,255,0.8)';
    ctx.lineWidth = 2;
    ctx.stroke();
    
    // Draw text with better styling
    ctx.save();
    ctx.translate(centerX, centerY);
    ctx.rotate(startAngle + segmentAngle / 2);
    ctx.textAlign = 'center';
    ctx.fillStyle = '#fff';
    ctx.font = 'bold 15px Poppins';
    ctx.shadowColor = 'rgba(0,0,0,0.5)';
    ctx.shadowBlur = 3;
    ctx.shadowOffsetX = 1;
    ctx.shadowOffsetY = 1;
    ctx.fillText(segment.text, radius * 0.7, 5);
    ctx.restore();
  });
  
  // Draw center circle with gradient
  const centerGradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, 35);
  centerGradient.addColorStop(0, '#667eea');
  centerGradient.addColorStop(1, '#2d3748');
  ctx.beginPath();
  ctx.arc(centerX, centerY, 35, 0, 2 * Math.PI);
  ctx.fillStyle = centerGradient;
  ctx.fill();
  ctx.strokeStyle = '#fff';
  ctx.lineWidth = 4;
  ctx.stroke();
  
  // Add center sparkle
  ctx.fillStyle = '#fff';
  ctx.font = 'bold 20px Poppins';
  ctx.textAlign = 'center';
  ctx.fillText('‚ú®', centerX, centerY + 7);
}

// Helper function to darken colors
function darkenColor(color, factor) {
  const hex = color.replace('#', '');
  const r = Math.max(0, parseInt(hex.substr(0, 2), 16) * (1 - factor));
  const g = Math.max(0, parseInt(hex.substr(2, 2), 16) * (1 - factor));
  const b = Math.max(0, parseInt(hex.substr(4, 2), 16) * (1 - factor));
  return `rgb(${Math.floor(r)}, ${Math.floor(g)}, ${Math.floor(b)})`;
}

// Spin wheel
function spinWheel() {
  if (isSpinning) return;
  
  isSpinning = true;
  gameStarted = true;
  const spinBtn = document.getElementById('spinBtn');
  spinBtn.disabled = true;
  spinBtn.textContent = 'Berputar...';
  spinBtn.style.background = 'linear-gradient(135deg,#6b7280,#4b5563)';
  
  // Random spin with more dramatic effect
  const spins = 4 + Math.random() * 4;
  targetRotation = currentRotation + (spins * 2 * Math.PI);
  spinSpeed = 0.25;
  
  // Add wheel shake effect
  const wheelWrap = document.querySelector('.wheelWrap');
  wheelWrap.style.animation = 'wheelShake 0.5s ease-in-out';
  
  animateSpin();
}

function animateSpin() {
  if (Math.abs(targetRotation - currentRotation) > 0.01) {
    currentRotation += (targetRotation - currentRotation) * spinSpeed;
    spinSpeed *= 0.985; // Slower deceleration for more dramatic effect
    drawWheel();
    requestAnimationFrame(animateSpin);
  } else {
    currentRotation = targetRotation;
    drawWheel();
    isSpinning = false;
    
    // Reset button
    const spinBtn = document.getElementById('spinBtn');
    spinBtn.disabled = false;
    spinBtn.textContent = 'Putar Roda';
    spinBtn.style.background = 'linear-gradient(135deg,#667eea,#764ba2,#f093fb)';
    
    // Remove shake animation
    const wheelWrap = document.querySelector('.wheelWrap');
    wheelWrap.style.animation = '';
    
    // Add completion effect
    wheelWrap.style.animation = 'wheelComplete 0.6s ease-out';
    
    // Determine winning segment
    const normalizedRotation = (2 * Math.PI - (currentRotation % (2 * Math.PI))) % (2 * Math.PI);
    const segmentAngle = (2 * Math.PI) / segments.length;
    const winningIndex = Math.floor(normalizedRotation / segmentAngle);
    
    setTimeout(() => {
      wheelWrap.style.animation = '';
      showScenario();
    }, 600);
  }
}

// Show scenario
function showScenario() {
  if (currentQuestion >= scenarios.length) {
    showGameComplete();
    return;
  }
  
  currentScenario = scenarios[currentQuestion];
  
  document.getElementById('situasiBox').innerHTML = `<p><strong>Situasi:</strong> ${currentScenario.situation}</p>`;
  
  const optionsDiv = document.getElementById('options');
  optionsDiv.style.display = 'flex';
  
  currentScenario.options.forEach((option, index) => {
    const btn = document.getElementById(`opt${index + 1}`);
    btn.textContent = option;
    btn.className = 'optBtn';
    btn.disabled = false;
    btn.onclick = () => selectAnswer(index);
  });
  
  document.getElementById('feedback').textContent = '';
  document.getElementById('questionCount').textContent = currentQuestion + 1;
}

// Select answer
function selectAnswer(selectedIndex) {
  const buttons = document.querySelectorAll('.optBtn');
  buttons.forEach(btn => btn.disabled = true);
  
  if (selectedIndex === currentScenario.correct) {
    document.getElementById(`opt${selectedIndex + 1}`).classList.add('correct');
    document.getElementById('feedback').innerHTML = `<span style="color: #059669;">‚úì ${currentScenario.feedback}</span>`;
    currentScore += 10;
  } else {
    document.getElementById(`opt${selectedIndex + 1}`).classList.add('wrong');
    document.getElementById(`opt${currentScenario.correct + 1}`).classList.add('correct');
    document.getElementById('feedback').innerHTML = `<span style="color: #dc2626;">‚úó Jawapan betul: ${currentScenario.options[currentScenario.correct]}</span><br><span style="color: #059669;">${currentScenario.feedback}</span>`;
  }
  
  document.getElementById('score').textContent = currentScore;
  currentQuestion++;
  
  setTimeout(() => {
    if (currentQuestion < scenarios.length) {
      resetForNextQuestion();
    } else {
      showGameComplete();
    }
  }, 5500);
}

// Reset for next question
function resetForNextQuestion() {
  document.getElementById('situasiBox').innerHTML = '<p style="text-align:center;color:var(--muted);font-style:italic;">Putar roda untuk soalan seterusnya...</p>';
  document.getElementById('options').style.display = 'none';
  document.getElementById('feedback').textContent = '';
}

// Show game complete
function showGameComplete() {
  const percentage = (currentScore / (scenarios.length * 10)) * 100;
  let message = '';
  
  if (percentage >= 80) {
    message = 'Cemerlang! Kamu sangat memahami cara menyayangi keluarga! üåü';
  } else if (percentage >= 60) {
    message = 'Bagus! Kamu faham konsep asas kasih sayang dalam keluarga. üëç';
  } else {
    message = 'Teruskan usaha! Cuba lagi untuk lebih memahami nilai keluarga. üí™';
  }
  
  document.getElementById('situasiBox').innerHTML = `
    <div style="text-align:center;">
      <h4 style="margin:0 0 10px 0;">Permainan Selesai!</h4>
      <p><strong>Skor Akhir: ${currentScore}/${scenarios.length * 10}</strong></p>
      <p>${message}</p>
    </div>
  `;
  document.getElementById('options').style.display = 'none';
  document.getElementById('feedback').textContent = '';
  document.getElementById('spinBtn').disabled = true;
}

// Reset game
function resetGame() {
  currentScore = 0;
  currentQuestion = 0;
  currentScenario = null;
  gameStarted = false;
  
  document.getElementById('score').textContent = '0';
  document.getElementById('questionCount').textContent = '0';
  document.getElementById('situasiBox').innerHTML = '<p style="text-align:center;color:var(--muted);font-style:italic;">Putar roda untuk mendapat situasi keluarga...</p>';
  document.getElementById('options').style.display = 'none';
  document.getElementById('feedback').textContent = '';
  document.getElementById('spinBtn').disabled = false;
  
  // Shuffle scenarios
  for (let i = scenarios.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [scenarios[i], scenarios[j]] = [scenarios[j], scenarios[i]];
  }
}

// Event listeners
document.getElementById('spinBtn').addEventListener('click', spinWheel);
document.getElementById('resetBtn').addEventListener('click', resetGame);

// Keyboard support
document.addEventListener('keydown', (e) => {
  if (e.code === 'Space' && !isSpinning && !document.getElementById('spinBtn').disabled) {
    e.preventDefault();
    spinWheel();
  }
});

// Initialize
drawWheel();
resetGame();
</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'983a081f0717ace9',t:'MTc1ODYzMDQwMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
