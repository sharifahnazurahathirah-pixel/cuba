<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üéØ KU1Z JUJUKAN</title>
  <style>
    * {margin:0; padding:0; box-sizing:border-box;}
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh; padding:20px;
    }
    .game-container {
      max-width:1200px; margin:0 auto; background:white;
      border-radius:20px; box-shadow:0 20px 40px rgba(0,0,0,0.1);
      overflow:hidden;
    }
    .header {
      background:linear-gradient(45deg,#ff6b6b,#feca57);
      color:white; padding:20px; text-align:center;
    }
    .header h1 {
      font-size:2.5rem; margin-bottom:10px;
      text-shadow:2px 2px 4px rgba(0,0,0,0.3);
    }
    /* Language buttons */
    .lang-buttons {
      display:flex; gap:10px; justify-content:center; margin:15px 0;
    }
    .lang-buttons button {
      padding:8px 15px; border:none; border-radius:20px;
      cursor:pointer; font-weight:bold;
      background:linear-gradient(45deg,#007bff,#0056b3); color:white;
      transition:0.3s;
    }
    .lang-buttons button:hover {transform:scale(1.05);}
    /* Stats */
    .stats {
      display:flex; justify-content:space-around;
      background:#f8f9fa; padding:20px; margin:20px; border-radius:15px;
    }
    .stat-item {text-align:center;}
    .stat-value {font-size:2rem;font-weight:bold;color:#007bff;}
    .stat-label {color:#666;margin-top:5px;}
    /* Board */
    .game-board {
      display:grid; grid-template-columns:repeat(10,1fr);
      gap:5px; padding:20px; background:#f8f9fa;
    }
    .board-cell {
      aspect-ratio:1; background:#e9ecef; border:2px solid #dee2e6;
      border-radius:10px; display:flex; align-items:center; justify-content:center;
      font-weight:bold; font-size:1.2rem; transition:all .3s ease; cursor:pointer;
    }
    .board-cell:hover {transform:scale(1.05); box-shadow:0 5px 15px rgba(0,0,0,0.2);}
    .start {background:#28a745; color:white;}
    .finish {background:#dc3545; color:white;}
    .player {background:#007bff; color:white; animation:pulse 1s infinite;}
    @keyframes pulse {0%{transform:scale(1);}50%{transform:scale(1.1);}100%{transform:scale(1);}}
    /* Question Panel */
    .question-panel {
      background:white; margin:20px; padding:25px; border-radius:15px;
      box-shadow:0 10px 25px rgba(0,0,0,0.1); border-left:5px solid #007bff;
      animation:fadeIn .6s ease;
    }
    @keyframes fadeIn {from{opacity:0;transform:scale(.9);}to{opacity:1;transform:scale(1);}}
    .question {font-size:1.3rem; margin-bottom:20px; color:#333; font-weight:bold;}
    .sequence-display {
      display:flex; gap:10px; margin:20px 0; flex-wrap:wrap; justify-content:center;
    }
    .sequence-item {
      background:#e3f2fd; border:2px solid #2196f3; border-radius:10px;
      padding:15px 20px; font-size:1.5rem; font-weight:bold; color:#1976d2;
      min-width:60px; text-align:center; animation:zoomIn .5s ease;
    }
    @keyframes zoomIn {from{opacity:0;transform:scale(.5);}to{opacity:1;transform:scale(1);}}
    .missing {background:#fff3e0;border:2px dashed #ff9800;color:#f57c00;}
    /* Input + Buttons */
    .answer-input {
      display:flex; gap:15px; align-items:center; justify-content:center; margin:20px 0;
    }
    .answer-input input {
      padding:12px 20px; font-size:1.2rem; border:2px solid #ddd; border-radius:10px;
      text-align:center; width:160px; transition:0.3s;
    }
    .answer-input input:focus {
      outline:none; border-color:#007bff; box-shadow:0 0 10px rgba(0,123,255,0.3);
    }
    .btn {
      background:linear-gradient(45deg,#007bff,#0056b3);
      color:white;border:none;padding:12px 25px;border-radius:25px;
      font-size:1.1rem;cursor:pointer;transition:all 0.3s ease;font-weight:bold;
    }
    .btn:hover {transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,123,255,0.4);}
    /* Feedback */
    .feedback {
      padding:15px; margin:15px 0; border-radius:10px; text-align:center;
      font-weight:bold; font-size:1.1rem;
    }
    .correct {background:#d4edda;color:#155724;border:1px solid #c3e6cb;}
    .incorrect {background:#f8d7da;color:#721c24;border:1px solid #f5c6cb;}
    /* Progress bar */
    .progress-container {width:80%;margin:15px auto;background:#eee;border-radius:20px;overflow:hidden;}
    .progress-bar {height:20px;background:#007bff;width:0%;transition:width 0.5s;}
    /* Timer */
    .timer {text-align:center;font-weight:bold;color:#dc3545;font-size:1.2rem;}
  </style>
</head>
<body>
  <div class="game-container">
    <div class="header">
      <h1>üéØ KU1Z JUJUKAN</h1>
      <p id="subtitle">Uji minda murid dengan soalan matematik</p>
    </div>

    <div class="lang-buttons">
      <button onclick="setLanguage('ms')">üá≤üáæ BM</button>
      <button onclick="setLanguage('en')">üá¨üáß EN</button>
    </div>

    <div class="stats">
      <div class="stat-item"><div class="stat-value" id="position">1</div><div class="stat-label" id="lblPos">Kedudukan</div></div>
      <div class="stat-item"><div class="stat-value" id="score">0</div><div class="stat-label" id="lblScore">Markah</div></div>
      <div class="stat-item"><div class="stat-value" id="level">1</div><div class="stat-label" id="lblLevel">Tahap</div></div>
    </div>

    <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>
    <div class="timer" id="timer">10s</div>

    <div class="game-board" id="gameBoard"></div>

    <div class="question-panel">
      <div class="question" id="question">Lengkapkan jujukan berikut:</div>
      <div class="sequence-display" id="sequenceDisplay"></div>
      <div class="answer-input">
        <input type="number" id="answerInput" placeholder="Masukkan jawapan di sini">
        <button class="btn" onclick="checkAnswer()" id="btnAnswer">Jawab</button>
        <button class="btn" onclick="getHint()" style="background:linear-gradient(45deg,#28a745,#20c997);" id="btnHint">Petua</button>
      </div>
      <div id="feedback"></div>
      <div style="text-align:center;margin-top:15px;">
        <button class="btn" onclick="restartQuiz()" id="btnRestart">Jawab Semula</button>
      </div>
    </div>
  </div>

<script>
let currentPosition=1, score=0, level=1, currentQuestion={}, qCount=0, totalQ=10, timerInt, timeLeft=10, lang='ms';

const texts={
  ms:{subtitle:"Uji minda murid dengan soalan matematik",pos:"Kedudukan",score:"Markah",level:"Tahap",
      q:"Lengkapkan jujukan berikut:",ans:"Jawab",hint:"Petua",restart:"Jawab Semula",ph:"Masukkan jawapan di sini",
      correct:"üéâ Betul! Tahniah!",wrong:"‚ùå Salah! Jawapan yang betul ialah "},
  en:{subtitle:"Test students with math sequence questions",pos:"Position",score:"Score",level:"Level",
      q:"Complete the following sequence:",ans:"Answer",hint:"Hint",restart:"Retry",ph:"Enter your answer here",
      correct:"üéâ Correct! Well done!",wrong:"‚ùå Wrong! The correct answer is "}
};

function setLanguage(l){lang=l;
  document.getElementById('subtitle').textContent=texts[l].subtitle;
  document.getElementById('lblPos').textContent=texts[l].pos;
  document.getElementById('lblScore').textContent=texts[l].score;
  document.getElementById('lblLevel').textContent=texts[l].level;
  document.getElementById('question').textContent=texts[l].q;
  document.getElementById('btnAnswer').textContent=texts[l].ans;
  document.getElementById('btnHint').textContent=texts[l].hint;
  document.getElementById('btnRestart').textContent=texts[l].restart;
  document.getElementById('answerInput').placeholder=texts[l].ph;
}

function initializeBoard(){
  const board=document.getElementById('gameBoard'); board.innerHTML='';
  for(let i=1;i<=50;i++){const cell=document.createElement('div');
    cell.className='board-cell'; cell.textContent=i;
    if(i===1){cell.classList.add('start'); cell.textContent='MULA';}
    else if(i===50){cell.classList.add('finish'); cell.textContent='TAMAT';}
    else if(i===currentPosition){cell.classList.add('player'); cell.textContent='üë§';}
    board.appendChild(cell);}
}

function generateQuestion(){
  const types=['arithmetic','geometric','square','fibonacci'];
  const type=types[Math.floor(Math.random()*types.length)];
  let sequence=[],missing=Math.floor(Math.random()*4)+1,answer=0;
  switch(type){
    case 'arithmetic':const diff=Math.floor(Math.random()*5)+2,start=Math.floor(Math.random()*10)+1;
      for(let i=0;i<6;i++)sequence.push(start+i*diff); answer=sequence[missing];break;
    case 'geometric':const ratio=Math.floor(Math.random()*3)+2,first=Math.floor(Math.random()*5)+1;
      for(let i=0;i<6;i++)sequence.push(first*Math.pow(ratio,i)); answer=sequence[missing];break;
    case 'square':for(let i=1;i<=6;i++)sequence.push(i*i); answer=sequence[missing];break;
    case 'fibonacci':sequence=[1,1,2,3,5,8]; answer=sequence[missing];break;
  }
  currentQuestion={sequence,missing,answer,type}; displaySequence();
  qCount++; updateProgress(); resetTimer();
}

function displaySequence(){
  const display=document.getElementById('sequenceDisplay'); display.innerHTML='';
  currentQuestion.sequence.forEach((num,idx)=>{const item=document.createElement('div');
    item.className='sequence-item'; item.textContent=(idx===currentQuestion.missing)?'?':num;
    if(idx===currentQuestion.missing)item.classList.add('missing'); display.appendChild(item);});
}

function checkAnswer(){
  const userAnswer=parseInt(document.getElementById('answerInput').value);
  const feedback=document.getElementById('feedback');
  clearInterval(timerInt);
  if(userAnswer===currentQuestion.answer){
    feedback.textContent=texts[lang].correct; feedback.className='feedback correct';
    score+=10*level; currentPosition=Math.min(currentPosition+1,50);
    if(currentPosition%10===0)level++; updateStats(); initializeBoard();
  } else {
    feedback.textContent=texts[lang].wrong+currentQuestion.answer; feedback.className='feedback incorrect';
  }
  setTimeout(()=>{if(qCount>=totalQ){feedback.textContent="üèÜ Tamat!";}else{generateQuestion();document.getElementById('answerInput').value='';feedback.innerHTML='';}},1500);
}

function getHint(){const fb=document.getElementById('feedback'); let hint='';
  switch(currentQuestion.type){
    case 'arithmetic':hint=`üí° ${lang==='ms'?"Petua: Bezanya ialah ":"Hint: Difference is "} ${currentQuestion.sequence[1]-currentQuestion.sequence[0]}`;break;
    case 'geometric':hint=`üí° ${lang==='ms'?"Petua: Nisbahnya ialah ":"Hint: Ratio is "} ${currentQuestion.sequence[1]/currentQuestion.sequence[0]}`;break;
    case 'square':hint=lang==='ms'?"üí° Petua: n¬≤":"üí° Hint: n¬≤";break;
    case 'fibonacci':hint=lang==='ms'?"üí° Petua: jumlah dua sebelumnya":"üí° Hint: sum of previous two";break;}
  fb.textContent=hint; fb.className='feedback'; fb.style.background='#fff3cd'; fb.style.color='#856404'; fb.style.border='1px solid #ffeaa7';
}

function updateStats(){document.getElementById('position').textContent=currentPosition;
  document.getElementById('score').textContent=score;
  document.getElementById('level').textContent=level;}
function updateProgress(){document.getElementById('progressBar').style.width=(qCount/totalQ*100)+'%';}
function resetTimer(){clearInterval(timerInt); timeLeft=10; document.getElementById('timer').textContent=timeLeft+'s';
  timerInt=setInterval(()=>{timeLeft--; document.getElementById('timer').textContent=timeLeft+'s';
    if(timeLeft<=0){clearInterval(timerInt); checkAnswer();}},1000);}
function restartQuiz(){qCount=0;score=0;level=1;currentPosition=1;updateStats();initializeBoard();updateProgress();generateQuestion();}
document.getElementById('answerInput').addEventListener('keypress',e=>{if(e.key==='Enter')checkAnswer();});
initializeBoard(); generateQuestion();
</script>
</body>
</html>
