<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hubung Kait: Ciri Pandang Darat Fizikal ↔ Budaya — Geografi Tingkatan 2 Bab 2</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{--bg1:#e9f7f2;--accent:#1565c0;--card:#ffffff;--muted:#374151}
    *{box-sizing:border-box}
    body{font-family:'Poppins',sans-serif;background:linear-gradient(135deg,var(--bg1),#ffffff);margin:0;padding:18px;display:flex;justify-content:center}
    .wrap{max-width:780px;width:100%}
    header{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06);display:flex;gap:12px;align-items:center}
    h1{margin:0;font-size:1.15rem;color:var(--accent)}
    .meta{color:#4b5563;font-size:0.95rem}

    .instructions{background:#e8f6ff;border-left:6px solid var(--accent);padding:14px;border-radius:10px;margin-top:14px}
    .instructions h2{margin:0 0 6px;font-size:1rem;color:var(--accent)}
    .instructions p{margin:6px 0;color:var(--muted)}

    .card{background:var(--card);border-radius:12px;padding:16px;margin-top:14px;box-shadow:0 6px 18px rgba(0,0,0,0.04)}
    .question-box{background:#eaf6ff;padding:14px;border-radius:10px;border-left:6px solid #90caf9}
    .question-box p{margin:0;font-weight:600;color:#0d47a1}

    textarea{width:100%;min-height:84px;padding:10px;border-radius:8px;border:1px solid #d1d5db;margin-top:12px;font-size:14px}
    .controls{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    button{background:var(--accent);color:#fff;border:0;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:600}
    button.secondary{background:#42a5f5}
    button.ghost{background:#f3f4f6;color:#111}

    .feedback{display:none;padding:12px;border-radius:8px;margin-top:10px;font-weight:600}
    .feedback.correct{background:#e6f4ea;color:#14532d}
    .feedback.partial{background:#fff7e6;color:#6a4a00}
    .feedback.incorrect{background:#ffe7e7;color:#7f1d1d}

    .progress{height:12px;background:#f3f4f6;border-radius:8px;overflow:hidden;margin-top:12px}
    .progress > i{display:block;height:100%;width:0;background:linear-gradient(90deg,#4dd0e1,#1565c0);transition:width .4s}

    .end{display:none;text-align:center;padding:12px}

    footer{margin-top:12px;color:#6b7280;font-size:13px}

    @media (max-width:600px){header{flex-direction:column;align-items:flex-start}button{flex:1 1 auto}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Hubung Kait: Ciri Pandang Darat Fizikal ↔ Budaya</h1>
        <div class="meta">Untuk: Geografi Tingkatan 2 — Bab 2 • Mod Murid (tanpa API)</div>
      </div>
    </header>

    <div class="instructions">
      <h2>Arahan Ringkas</h2>
      <p>1) Baca pernyataan dalam kotak biru. 2) Tulis jawapan anda menerangkan hubungan antara ciri fizikal dan budaya (atau sebaliknya, mengikut soalan). 3) Klik <strong>Hantar</strong> untuk semak. 4) Jika jawapan kurang tepat, pilih <strong>Cuba Lagi</strong> atau <strong>Teruskan Soalan Lain</strong>. Lengkapkan semua soalan (6) untuk lihat ringkasan.</p>
    </div>

    <div class="card" id="card">
      <div id="stageArea"></div>

      <div class="progress" aria-hidden="true"><i id="bar"></i></div>

      <div id="summary" class="end"></div>
    </div>

    <footer>Tip: Gunakan ayat ringkas 1–2 ayat. Contoh kata kunci mungkin: padi, sungai, nelayan, teres, pantai.</footer>
  </div>

  <script>
    // Soalan—jenis A: Fizikal → Budaya; jenis B: Budaya → Fizikal
    const questions = [
      { type: 'A', text: '🌾 Pernyataan: Kawasan tanah pamah yang subur (banyak sawah padi).\nSoalan: Terangkan 1 cara ciri fizikal ini mempengaruhi budaya setempat.', keywords: ['padi','sawah','menuai','pertanian','kampung'] },
      { type: 'B', text: '🏠 Pernyataan: Terdapat budaya rumah panggung yang tinggi (rumah tradisi).\nSoalan: Apakah ciri fizikal yang biasanya wujud di kawasan yang mempunyai rumah panggung? (nyatakan 1 ciri)', keywords: ['banjir','lembap','pantai','tasik','air','rendah'] },
      { type: 'A', text: '🚣 Pernyataan: Sungai lebar yang boleh dilayari dan menjadi laluan utama.', keywords: ['perdagangan','pengangkutan','ikan','pelabuhan','pasar'] , ask:'Soalan: Terangkan 1 aktiviti budaya/ekonomi yang dipengaruhi oleh sungai.'},
      { type: 'B', text: '🎎 Pernyataan: Wujudnya upacara menuai (festival padi) sebagai budaya tahunan.', keywords: ['datar','sawah','iklim','musim','pertanian'], ask:'Soalan: Apakah ciri fizikal / musim yang biasanya menyokong budaya menuai ini?' },
      { type: 'A', text: '⛰️ Pernyataan: Kawasan berbukit dengan pertanian teres.', keywords: ['teres','lereng','bukit','padi','penduduk'], ask:'Soalan: Terangkan 1 penyesuaian budaya atau teknik pertanian di kawasan ini.' },
      { type: 'B', text: '🏖️ Pernyataan: Komuniti yang terkenal dengan aktiviti nelayan dan upacara laut.', keywords: ['pantai','laut','gelombang','tumpuan ikan','karang'], ask:'Soalan: Nyatakan 1 ciri fizikal yang biasanya wujud di kawasan dengan budaya ini.' }
    ];

    let idx = 0;
    const total = questions.length;
    const stageArea = document.getElementById('stageArea');
    const bar = document.getElementById('bar');
    const summary = document.getElementById('summary');
    const answers = [];

    function renderStage() {
      const q = questions[idx];
      bar.style.width = Math.round((idx/total)*100)+'%';

      stageArea.innerHTML = `
        <div class="question-box" id="qbox">
          <p>${q.text.replace(/\\n/g,'<br>')}</p>
        </div>
        <textarea id="resp" placeholder="Tulis jawapan anda di sini (1-2 ayat)..."></textarea>
        <div class="controls">
          <button id="send">Hantar</button>
          <button class="secondary" id="try" style="display:none;">Cuba Lagi</button>
          <button class="ghost" id="skip" style="display:none;">Teruskan Soalan Lain</button>
        </div>
        <div id="fb" class="feedback" role="status" aria-live="polite"></div>
      `;

      document.getElementById('send').addEventListener('click', handleSubmit);
      document.getElementById('try').addEventListener('click', ()=>{ document.getElementById('fb').style.display='none'; document.getElementById('resp').focus(); document.getElementById('try').style.display='none'; });
      document.getElementById('skip').addEventListener('click', ()=>{ answers.push({q: q.text, a: '(Dilangkau)', fb: 'Dilangkau oleh pelajar'}); nextStage(); });
      document.getElementById('resp').focus();
    }

    function normalize(s){ return s? s.toLowerCase().replace(/[.,!?;:]/g,'') : ''; }

    function handleSubmit(){
      const q = questions[idx];
      const val = normalize(document.getElementById('resp').value);
      const fb = document.getElementById('fb');
      const kws = q.keywords.map(k=>k.toLowerCase());

      if(!val){ fb.className='feedback incorrect'; fb.style.display='block'; fb.textContent='Sila masukkan jawapan sebelum hantar.'; return; }

      // check keywords
      let found = kws.some(k=> val.includes(k));
      if(found){
        fb.className='feedback correct';
        fb.style.display='block';
        fb.textContent = 'Betul ✅ — anda nampak kaitan antara ciri fizikal dan budaya. Contoh ringkas: ' + kws.slice(0,3).join(', ') + '.';
        answers.push({q:q.text,a:val,fb:fb.textContent});
        // show skip/next
        document.getElementById('skip').style.display='inline-block';
        // auto-enable next after short delay
        setTimeout(()=>{ nextStage(); },900);
      } else if(val.length>6){
        fb.className='feedback partial'; fb.style.display='block'; fb.textContent = 'Hampir betul ✨ — jawapan contoh yang lebih lengkap: ' + kws.join(', ') + '. Tekan "Cuba Lagi" untuk ubah jawapan atau "Teruskan Soalan Lain".';
        document.getElementById('try').style.display='inline-block';
        document.getElementById('skip').style.display='inline-block';
        answers.push({q:q.text,a:val,fb:fb.textContent});
      } else {
        fb.className='feedback incorrect'; fb.style.display='block'; fb.textContent = 'Kurang tepat ❌. Contoh jawapan: ' + kws.join(', ')+'. Tekan "Cuba Lagi" atau "Teruskan Soalan Lain".';
        document.getElementById('try').style.display='inline-block';
        document.getElementById('skip').style.display='inline-block';
        answers.push({q:q.text,a:val,fb:fb.textContent});
      }
    }

    function nextStage(){
      idx++;
      if(idx < total){ renderStage(); } else { finishQuiz(); }
    }

    function finishQuiz(){
      bar.style.width = '100%';
      stageArea.innerHTML = '';
      let html = '<h3>🎉 Tamat — Ringkasan Jawapan</h3><ol>';
      answers.forEach(a=>{ html += `<li><strong>Pernyataan:</strong> <div style="margin:6px 0;padding:8px;background:#f8fafc;border-radius:6px">${a.q.replace(/\\n/g,'<br>')}</div><strong>Jawapan murid:</strong> ${a.a}<br><em>Maklum balas:</em> ${a.fb}</li><br>`; });
      html += '</ol><div style="margin-top:12px"><button onclick="restart()">Ulang Semula</button></div>';
      summary.innerHTML = html; summary.style.display = 'block';
    }

    function restart(){ idx = 0; answers.length = 0; summary.style.display='none'; renderStage(); }

    // init
    renderStage();
  </script>
</body>
</html>
