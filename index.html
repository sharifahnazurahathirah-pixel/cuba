<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🎯 SEQUENCE QUEST</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #6dd5ed, #2193b0);
      margin: 0;
      padding: 0;
      text-align: center;
      color: #333;
    }
    .header {
      padding: 20px;
      background: #fff;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .instructions-panel {
      background: #fff8e1;
      margin: 20px;
      padding: 20px 25px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      border-left: 6px solid #ff9800;
      text-align: left;
    }
    .instructions-panel h2 {
      margin-bottom: 15px;
      font-size: 1.5rem;
      color: #e65100;
    }
    .instructions-panel ul {
      padding-left: 20px;
      line-height: 1.6;
    }
    .close-btn {
      background: #e65100;
      color: #fff;
      border: none;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      float: right;
    }
    .quiz-container {
      margin: 20px auto;
      padding: 20px;
      background: #fff;
      border-radius: 15px;
      width: 90%;
      max-width: 600px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    }
    .question-box {
      background: #f1f8e9;
      padding: 20px;
      border: 2px dashed #8bc34a;
      border-radius: 12px;
      margin-bottom: 20px;
      font-size: 1.2rem;
    }
    input {
      padding: 10px;
      width: 100px;
      border: 2px solid #2196f3;
      border-radius: 8px;
      text-align: center;
      font-size: 1rem;
    }
    button {
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1rem;
      transition: 0.3s;
    }
    button:hover { opacity: 0.9; }
    .submit-btn { background: #4caf50; color: white; }
    .hint-btn { background: #ff9800; color: white; }
    .restart-btn { background: #2196f3; color: white; }
    .feedback {
      font-weight: bold;
      margin-top: 15px;
      min-height: 24px;
    }
    .score-board, .timer, .progress {
      margin-top: 10px;
      font-size: 1rem;
    }
    .progress-bar {
      height: 15px;
      background: #ddd;
      border-radius: 10px;
      margin-top: 10px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      width: 0%;
      background: #4caf50;
      transition: width 0.3s ease-in-out;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>🎯 SEQUENCE QUEST</h1>
    <p>Permainan Jujukan Matematik Tingkatan 2</p>
  </div>

  <!-- Panel Arahan -->
  <div class="instructions-panel" id="instructions">
    <button class="close-btn" onclick="document.getElementById('instructions').style.display='none'">Tutup ✖</button>
    <h2>📘 Arahan Permainan</h2>
    <ul>
      <li>Pemain bermula dengan 10 soalan jujukan nombor.</li>
      <li>Lengkapkan nombor yang hilang dalam kotak jawapan.</li>
      <li>Setiap jawapan betul akan menambah markah anda.</li>
      <li>Jawapan salah akan dipaparkan bersama jawapan sebenar.</li>
      <li>Anda ada <b>10 saat</b> untuk jawab setiap soalan ⏱️.</li>
      <li>Gunakan butang <b>Petua</b> jika perlukan bantuan.</li>
      <li>Kumpul markah tertinggi untuk menang 🏆.</li>
    </ul>
  </div>

  <div class="quiz-container">
    <div class="question-box" id="question"></div>
    <input type="number" id="answer" placeholder="Jawapan">
    <div>
      <button class="submit-btn" onclick="checkAnswer()">Hantar</button>
      <button class="hint-btn" onclick="showHint()">Petua 💡</button>
    </div>
    <div class="feedback" id="feedback"></div>
    <div class="timer">Masa: <span id="time">10</span>s</div>
    <div class="score-board">Markah: <span id="score">0</span></div>
    <div class="progress">Soalan: <span id="qNum">0</span>/10</div>
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    <div id="finalResult"></div>
    <button id="restartBtn" class="restart-btn" style="display:none;" onclick="restartQuiz()">🔄 Main Semula</button>
  </div>

  <script>
    const allQuestions = [
      {q:"2, 4, 6, ?", a:8, h:"Tambah 2 setiap kali"},
      {q:"5, 10, 15, ?", a:20, h:"Darab 5"},
      {q:"1, 4, 9, 16, ?", a:25, h:"Kuasa dua nombor"},
      {q:"10, 20, 30, ?", a:40, h:"Tambah 10"},
      {q:"2, 4, 8, 16, ?", a:32, h:"Darab 2"},
      {q:"100, 90, 80, ?", a:70, h:"Tolak 10"},
      {q:"1, 2, 4, 8, ?", a:16, h:"Darab 2"},
      {q:"3, 6, 9, ?", a:12, h:"Tambah 3"},
      {q:"7, 14, 21, ?", a:28, h:"Darab 7"},
      {q:"9, 18, 27, ?", a:36, h:"Darab 9"},
      {q:"50, 45, 40, ?", a:35, h:"Tolak 5"},
      {q:"11, 22, 33, ?", a:44, h:"Tambah 11"},
      {q:"4, 8, 12, ?", a:16, h:"Tambah 4"},
      {q:"81, 72, 63, ?", a:54, h:"Tolak 9"},
      {q:"6, 12, 24, ?", a:48, h:"Darab 2"}
    ];
    let questions = [];
    let current = 0, score = 0, timer, timeLeft = 10;

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i+1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function startQuiz() {
      questions = shuffle([...allQuestions]).slice(0,10);
      current = 0; score = 0;
      document.getElementById("score").innerText = score;
      document.getElementById("finalResult").innerHTML = "";
      document.getElementById("restartBtn").style.display="none";
      loadQuestion();
    }

    function loadQuestion() {
      if(current >= questions.length) { endQuiz(); return; }
      document.getElementById("question").innerText = `Soalan ${current+1}: ${questions[current].q}`;
      document.getElementById("answer").value = "";
      document.getElementById("feedback").innerText = "";
      document.getElementById("qNum").innerText = current+1;
      document.getElementById("progressFill").style.width = ((current)/questions.length)*100 + "%";
      resetTimer();
    }

    function checkAnswer() {
      let ans = parseInt(document.getElementById("answer").value);
      if(ans === questions[current].a) {
        document.getElementById("feedback").innerText = "✅ Betul!";
        score++;
        document.getElementById("score").innerText = score;
      } else {
        document.getElementById("feedback").innerText = "❌ Salah! Jawapan: " + questions[current].a;
      }
      clearInterval(timer);
      current++;
      setTimeout(loadQuestion, 1000);
    }

    function showHint() {
      document.getElementById("feedback").innerText = "💡 Petua: " + questions[current].h;
    }

    function resetTimer() {
      clearInterval(timer);
      timeLeft = 10;
      document.getElementById("time").innerText = timeLeft;
      timer = setInterval(()=>{
        timeLeft--;
        document.getElementById("time").innerText = timeLeft;
        if(timeLeft <= 0) {
          clearInterval(timer);
          document.getElementById("feedback").innerText = "⏰ Masa tamat! Jawapan: " + questions[current].a;
          current++;
          setTimeout(loadQuestion, 1000);
        }
      },1000);
    }

    function endQuiz() {
      clearInterval(timer);
      document.getElementById("question").innerText = "🎉 Kuiz Tamat!";
      document.getElementById("feedback").innerText = "";
      document.getElementById("finalResult").innerHTML = `<h2>Markah Akhir: ${score}/${questions.length}</h2>
        <p>${score >= 8 ? "Hebat! 🌟" : score >=5 ? "Bagus, teruskan berlatih 👍" : "Jangan putus asa, cuba lagi 💪"}</p>`;
      document.getElementById("restartBtn").style.display="inline-block";
      document.getElementById("progressFill").style.width = "100%";
    }

    function restartQuiz() {
      startQuiz();
    }

    window.onload = startQuiz;
  </script>
</body>
</html>
